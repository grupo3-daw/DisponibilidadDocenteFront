<div id="contenedor">
  <div id="informacion">
    <h3>Disponibilidad Semanal</h3>
    <div fxLayout fxLayout.xs="column" id="indicaciones">
      <h5 fxFlex="50%" fxFlex.xs="100%">
        Estimado profesor presione los <b>dias</b> y <b>horas</b>
      </h5>
      <h4 fxFlex="50%" fxFlex.xs="100%" class="txright">
       Minimo de Horas  <b>{{minimo}}</b> |   Maximo de Horas <b>{{maximo}}</b> | Horas Tomadas <b>{{ horas }}</b>
      </h4>
    </div>
  </div>
  <div class="example-container mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="hora" sticky>
        <th mat-header-cell *matHeaderCellDef>Hora/ Dia</th>
        <td mat-cell *matCellDef="let element">
          {{ element.hora }}
        </td>
      </ng-container>

      <ng-container matColumnDef="lunes">
        <th mat-header-cell *matHeaderCellDef>
          <p>Lunes</p>
          <mat-checkbox (change)="$event ? masterToggle('lunes') : null" [checked]="isAllSelected('lunes')"
            [indeterminate]="
              tieneElementosSeleccionados('lunes') && !isAllSelected('lunes')
            " [disabled]="!tieneElementosSeleccionados('lunes') && horas >= maximo">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox (click)="$event.stopPropagation()"
            (change)="$event ? actualizarDisponibilidad('lunes', i) : null" [checked]="element.lunes"
            [disabled]="!element.lunes && horas >= maximo">
          </mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="martes">
        <th mat-header-cell *matHeaderCellDef>
          <p>Martes</p>
          <mat-checkbox (change)="$event ? masterToggle('martes') : null" [checked]="isAllSelected('martes')"
            [indeterminate]="
              tieneElementosSeleccionados('martes') && !isAllSelected('martes')
            " [disabled]="!tieneElementosSeleccionados('martes') && horas >= maximo">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox (click)="$event.stopPropagation()"
            (change)="$event ? actualizarDisponibilidad('martes', i) : null" [checked]="element.martes"
            [disabled]="!element.martes && horas >= maximo">
          </mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="miercoles">
        <th mat-header-cell *matHeaderCellDef>
          <p>Miercoles</p>
          <mat-checkbox (change)="$event ? masterToggle('miercoles') : null" [checked]="isAllSelected('miercoles')"
            [indeterminate]="
              tieneElementosSeleccionados('miercoles') &&
              !isAllSelected('miercoles')
            " [disabled]="!tieneElementosSeleccionados('miercoles') && horas >= maximo">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox (click)="$event.stopPropagation()"
            (change)="$event ? actualizarDisponibilidad('miercoles', i) : null" [checked]="element.miercoles"
            [disabled]="!element.miercoles && horas >= maximo">
          </mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="jueves">
        <th mat-header-cell *matHeaderCellDef>
          <p>Jueves</p>
          <mat-checkbox (change)="$event ? masterToggle('jueves') : null" [checked]="isAllSelected('jueves')"
            [indeterminate]="
              tieneElementosSeleccionados('jueves') && !isAllSelected('jueves')
            " [disabled]="!tieneElementosSeleccionados('jueves') && horas >= maximo">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox (click)="$event.stopPropagation()"
            (change)="$event ? actualizarDisponibilidad('jueves', i) : null" [checked]="element.jueves"
            [disabled]="!element.jueves && horas >= maximo">
          </mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="viernes">
        <th mat-header-cell *matHeaderCellDef>
          <p>Viernes</p>
          <mat-checkbox (change)="$event ? masterToggle('viernes') : null" [checked]="isAllSelected('viernes')"
            [indeterminate]="
              tieneElementosSeleccionados('viernes') &&
              !isAllSelected('viernes')
            " [disabled]="!tieneElementosSeleccionados('viernes') && horas >= maximo">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox (click)="$event.stopPropagation()"
            (change)="$event ? actualizarDisponibilidad('viernes', i) : null" [checked]="element.viernes"
            [disabled]="!element.viernes && horas >= maximo">
          </mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="sabado">
        <th mat-header-cell *matHeaderCellDef>
          <p>Sabado</p>
          <mat-checkbox (change)="$event ? masterToggle('sabado') : null" [checked]="isAllSelected('sabado')"
            [indeterminate]="
              tieneElementosSeleccionados('sabado') && !isAllSelected('sabado')
            " [disabled]="!tieneElementosSeleccionados('sabado') && horas >= maximo">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-checkbox (click)="$event.stopPropagation()"
            (change)="$event ? actualizarDisponibilidad('sabado', i) : null" [checked]="element.sabado"
            [disabled]="!element.sabado && horas >= maximo">
          </mat-checkbox>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <div id="footer">
    <button [disabled]="diasNoSeleccionados || cursosSeleccionados.length < 4 " mat-raised-button color="accent"
      (click)="openDialog()">
      Registrar
    </button>
  </div>
</div>

<ng-template #horarioVista>
  <hr>
  <h4>Cursos Seleccionados</h4>
  <br>
  <div *ngFor="let row of horarioEnVista.cursos">
    <span  style="text-transform: capitalize;"> {{row.NOMBRECURSO}}</span>
  </div>
  <hr>
  <h4>Horas</h4>
  <br>
  <div *ngFor="let row of horarioEnVista.disponibilidad">
    <span style="text-transform: capitalize;">{{ row.dia }}</span>: <span>{{ row.horas }}</span>
  </div>
  <hr>
</ng-template>
